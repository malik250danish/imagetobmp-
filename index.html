<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>JPG to BMP Converter</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
      crossorigin="anonymous"
    />
    <style>
      .uploaddSection {
        border: 2px solid blue;
        border-style: dashed;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="row">
        <div class="col-md-12">
          <div class="uploaddSection p-5">
            <input
              class="btn btn-primary"
              type="file"
              id="jpgFileInput"
              accept=".jpg"
            />
            <button class="btn btn-warning" id="convertButton">
              Convert to BMP
            </button>
            <a
              class="btn btn-danger my-2"
              id="downloadLink"
              style="display: none"
              >Download BMP</a
            >
            <div>
              <canvas class="w-100" id="canvas" style="display: none"></canvas>
              <img class="img-fluid" id="bmpImage" style="display: none" />
            </div>
          </div>
        </div>
      </div>
    </div>

    <script
      src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
      integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js"
      integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+"
      crossorigin="anonymous"
    ></script>
    <script>
      document.getElementById("convertButton").addEventListener("click", () => {
        const jpgFileInput = document.getElementById("jpgFileInput");
        const downloadLink = document.getElementById("downloadLink");
        const canvas = document.getElementById("canvas");
        const context = canvas.getContext("2d");
        const bmpImage = document.getElementById("bmpImage");

        if (jpgFileInput.files.length === 0) {
          alert("Please select a JPG file.");
          return;
        }

        const jpgFile = jpgFileInput.files[0];
        const reader = new FileReader();

        reader.onload = function (e) {
          const img = new Image();
          img.src = e.target.result;

          img.onload = function () {
            canvas.width = img.width;
            canvas.height = img.height;
            context.drawImage(img, 0, 0);
            canvas.toBlob((blob) => {
              const bmpURL = URL.createObjectURL(blob);
              bmpImage.src = bmpURL;
              bmpImage.style.display = "block";
              downloadLink.href = bmpURL;
              downloadLink.download = "output.bmp";
              downloadLink.style.display = "block";
            }, "image/bmp");
          };
        };

        reader.readAsDataURL(jpgFile);
      });
    </script>
  </body>
</html>
